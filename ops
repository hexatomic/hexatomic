{"version":1,"ops":[{"type":1,"author":{"id":"7fc094c5f01526c965e541ec82007c487f6fa288"},"timestamp":1581086100,"metadata":{"github-id":"MDU6SXNzdWU1NjE2NzQwNjc=","github-url":"https://github.com/hexatomic/hexatomic/issues/139","origin":"github"},"title":"Graph editor: tokenize always adds tokens to the first text, even if the selected segment is exclusively overlapping another text","message":"**Describe the bug**\n\nIn a document with \u003e 1 `STextualDS`, the `t` command always appends tokens to the *first* text, not the selected one.\n\nSimilarly, when several segments overlapping different DSs are selected for display, and the first text is **not** among the selected, tokens still get appended to the first text.\n\n**To reproduce the bug**\nSteps to reproduce the behavior:\n1. Open a document with more than one text in the graph editor.\n2. Select a segment that is not overlapping the first text.\n3. `t NEW`\n4. The token is added to the first segment, rather than the segment that is currently selected.\n\n**Expected behavior**\n\nI'd expect the new token to be appended to the selected segment, or if it's not clear which text this token should belong to (i.e., when more than one texts are selected via segments), either\n\n- be asked which text the token should be added to, or\n- be given an error message saying that there are more than one candidates selected to to whose texts the token could be added.\n\n**Screenshots**\n\n![addtoken](https://user-images.githubusercontent.com/3007126/74037800-4dbc7900-49bf-11ea-9908-f233b43ecce9.gif)\n\n\n**Desktop (please complete the following information):**\n - Operating System: [e.g. Ubuntu 18.04]\n - Hexatomic Version: [e.g. 1.0.3]\n - Java Version: [e.g. OpenJDK 8, Oracle JDK 11]\n \n\n**Additional context**\nAdd any other context about the problem here.","files":null}]}