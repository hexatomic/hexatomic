{"version":1,"ops":[{"type":1,"author":{"id":"7fc094c5f01526c965e541ec82007c487f6fa288"},"timestamp":1581086749,"metadata":{"github-id":"MDU6SXNzdWU1NjE2ODA1NDY=","github-url":"https://github.com/hexatomic/hexatomic/issues/140","origin":"github"},"title":"Graph editor: inserting tokens with 'ta' or 'tb' throws StringIndexOutOfRangeException when \u003e1 text in domain, tokens are deleted/shortened","message":"**Describe the bug**\n\nWhen segements are selected that overlap \u003e1 `STextualDS`, and a token is inserted with `ta` or `tb`, an SIOORE is thrown.\n\n*However*, the token is still added to the right `STextualDS` (in contrast to #139).\n\nIt also seems that this affects the tokens in other segments, which are deleted and/or shortened.\n\n**To reproduce the bug**\nSteps to reproduce the behavior:\n1. Open a document containing more than 1 DS in the graph editor\n2. Select segments that overlap more than on DS (between each other, not individually)\n3. Insert a token with `ta` or `tb`\n4. SIOORE is thrown\n5. Token is still inserted into the correct text.\n6. Tokens in other segments are deleted/shortened.\n\n**Expected behavior**\n\nI'd expect no exception, instead correct insertion of the token, correct visual feedback (token appearing in the graph), and no side effects on other segments.\n\n**Screenshots**\n\nWait till you see this in action ðŸ˜±:\n\n![addtoken](https://user-images.githubusercontent.com/3007126/74038662-d8ea3e80-49c0-11ea-9a92-6dda1e53e51a.gif)\n\n\n**Desktop (please complete the following information):**\n - Operating System: [e.g. Ubuntu 18.04]\n - Hexatomic Version: [e.g. 1.0.3]\n - Java Version: [e.g. OpenJDK 8, Oracle JDK 11]\n \n\n**Additional context**\nAdd any other context about the problem here.","files":null}]}