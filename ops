{"version":1,"ops":[{"type":6,"author":{"id":"511c1d10913ce6d519f06c5dc29eb53e06f7a634"},"timestamp":1601990159,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlRWRpdDo0MzgwMTQxNzE="},"target":"a591afc28ff4a5121a608c965692fc97faba00a3bf8a6d1202f6accf1cd2e131","message":"I'm following the 'Editing the graph' section in the Hexatomic User Guide. Having deleted tokens #t1 and #t2, if I add the words back (\"tb #t3 This is\"), then save my corpus, tokens #t1 and #t2 are no longer present in my 'document_1.salt' file, but they are still present in the STextualDS node of that file, and they show up in the Text Viewer. I get the result, \"This is This is an example .\" Is this intentional?","files":null},{"type":5,"author":{"id":"511c1d10913ce6d519f06c5dc29eb53e06f7a634"},"timestamp":1601990117,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDM4NDUzNzY2Njg="},"added":["bug"],"removed":[]},{"type":3,"author":{"id":"725ac77188b9c2093ea4100ba878cd5190f5dc34"},"timestamp":1602492378,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDcwNjk3NjY3Nw==","github-url":"https://github.com/hexatomic/hexatomic/issues/230#issuecomment-706976677"},"message":"It looks like we did not define the semantics of deleting tokens very well. For the graph editor, we try to be mostly compatible (or at least \"inspired\") with the command line syntax of [GraphAnno](https://github.com/LBierkandt/graph-anno/blob/master/doc/GraphAnno-Documentation_en.pdf). GraphAnno does not have primary texts, so they did not need to define how to handle it. In theory, you also might want to have the possibility to delete tokens without changing the primary text, e.g. if there are different tokenizations for the same primary text. \n\nFor Hexatomic I see several alternatives of implementing it\n\n- not handling this in the graph editor at all, but implementing a proper token and primary text editor (this is not on our roadmap yet?)\n- adding a flag to the `d` command or a special \"token delete\" command that also removes all covered primary text\n- adding a \"cleanup primary\" text command that removes all uncovered text ranges\n\n@sdruskat what do you think would be the best option to proceed?","files":null},{"type":3,"author":{"id":"7fc094c5f01526c965e541ec82007c487f6fa288"},"timestamp":1602858540,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDcxMDA4MTgxOA==","github-url":"https://github.com/hexatomic/hexatomic/issues/230#issuecomment-710081818"},"message":"Having thought about this, I think a good way to handle this in a way that is coherent for end users without impeding usability could be the following:\n\n- Have two \"types\" of editors:\n    1. \"Destructive\"\u003csup\u003e1\u003c/sup\u003e editors - e.g., the Graph Editor - that propagate changes into the underlying data source.  \n    The Graph Editor would not only add text to the `STextualDS` when doing `t Text`, but would also remove the respective parts of the `STextualDS` when tokens are deleted. This way, we'd have coherent behaviour within this kind of editor.\n    2. \"Non-destructive\" editors - e.g., the Grid Editor - will *not* touch the data source.  \n    This means that you wouldn't be able to add, change, or delete tokens in the Grid Editor for example, or that respective actions would instead add a new annotation or tokenization layer.\n- Implement a dedicated Token Editor to handle changes in the underlying data source as well as tokenizations, so that these changes can still be made for documents that users would edit with non-destructive editors exclusively.\n\nAlso, we could use dialogs in destructive editors to notify users of actions that will edit the data source. There are dialogs in the platform that allow to suppress further appearances of these dialogs, so that the user can choose to ignore any future warnings of the same kind: [MessageDialogWithToggle](https://help.eclipse.org/2020-09/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fjface%2Fdialogs%2FMessageDialogWithToggle.html).\n\nWhat do you think?\n\n\u003csup\u003e1\u003c/sup\u003eShould find a better word for the documentation ;).","files":null}]}