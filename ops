{"version":1,"ops":[{"type":6,"author":{"id":"7fc094c5f01526c965e541ec82007c487f6fa288"},"timestamp":1581008398,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlRWRpdDozNDg2MjM0NDg="},"target":"d7679f6cf50af0ea2c152464acaa5cc0e25ceb6dd77d088507ffe9e0fa874adf","message":"**Describe the bug**\n\nDepending on the selection of segments, sometimes selecting more than one segment throws an IOOBE.\n\n**To reproduce the bug**\nSteps to reproduce the behavior:\n1. Open the first document of the Salt example in the graph viewer\n2. Include spans (the IOOBE should now be thrown)\n3. Select the second segment\n4. Additionally select the third segment -\u003e IOOBE is thrown\n\nCf. gif below, which also shows examples of #131 (watch for dual clicks).\n\nStack trace:\n\n````\n!ENTRY org.eclipse.e4.ui.workbench 4 0 2020-02-06 17:58:53.972\n!MESSAGE Internal Error\n!STACK 0\njava.lang.IndexOutOfBoundsException: Index: 2, Size: 2\n\tat org.eclipse.draw2d.geometry.PointList.getPoint(PointList.java:194)\n\tat org.eclipse.draw2d.MidpointLocator.getReferencePoint(MidpointLocator.java:64)\n\tat org.eclipse.draw2d.AbstractLocator.relocate(AbstractLocator.java:111)\n\tat org.eclipse.draw2d.DelegatingLayout.layout(DelegatingLayout.java:75)\n\tat org.eclipse.draw2d.Figure.layout(Figure.java:1096)\n\tat org.eclipse.draw2d.PolylineConnection.layout(PolylineConnection.java:179)\n\tat org.eclipse.draw2d.Figure.validate(Figure.java:1899)\n\tat org.eclipse.draw2d.Figure.validate(Figure.java:1901)\n\tat org.eclipse.draw2d.Figure.validate(Figure.java:1901)\n\tat org.eclipse.draw2d.FreeformViewport$FreeformViewportLayout.calculatePreferredSize(FreeformViewport.java:25)\n\tat org.eclipse.draw2d.AbstractLayout.getPreferredSize(AbstractLayout.java:110)\n\tat org.eclipse.draw2d.AbstractHintLayout.getPreferredSize(AbstractHintLayout.java:90)\n\tat org.eclipse.draw2d.Figure.getPreferredSize(Figure.java:810)\n\tat org.eclipse.draw2d.ScrollPaneSolver.solve(ScrollPaneSolver.java:82)\n\tat org.eclipse.draw2d.FigureCanvas.layoutViewport(FigureCanvas.java:325)\n\tat org.eclipse.draw2d.FigureCanvas.access$4(FigureCanvas.java:323)\n\tat org.eclipse.draw2d.FigureCanvas$3.notifyValidating(FigureCanvas.java:292)\n\tat org.eclipse.draw2d.UpdateManager.fireValidating(UpdateManager.java:143)\n\tat org.eclipse.draw2d.DeferredUpdateManager.performValidation(DeferredUpdateManager.java:217)\n\tat org.eclipse.draw2d.DeferredUpdateManager.performUpdate(DeferredUpdateManager.java:193)\n\tat org.eclipse.zest.core.viewers.internal.AbstractStructuredGraphViewer.internalRefresh(AbstractStructuredGraphViewer.java:339)\n\tat org.eclipse.jface.viewers.StructuredViewer.internalRefresh(StructuredViewer.java:1250)\n\tat org.eclipse.jface.viewers.StructuredViewer.lambda$3(StructuredViewer.java:1477)\n\tat org.eclipse.jface.viewers.StructuredViewer.preservingSelection(StructuredViewer.java:1393)\n\tat org.eclipse.jface.viewers.StructuredViewer.preservingSelection(StructuredViewer.java:1354)\n\tat org.eclipse.jface.viewers.StructuredViewer.refresh(StructuredViewer.java:1477)\n\tat org.eclipse.jface.viewers.StructuredViewer.refresh(StructuredViewer.java:1438)\n\tat org.eclipse.jface.viewers.StructuredViewer.setFilters(StructuredViewer.java:1570)\n\tat org.corpus_tools.hexatomic.graph.GraphEditor.updateView(GraphEditor.java:405)\n\tat org.corpus_tools.hexatomic.graph.GraphEditor.access$0(GraphEditor.java:363)\n\tat org.corpus_tools.hexatomic.graph.GraphEditor$UpdateViewListener.widgetSelected(GraphEditor.java:697)\n\tat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:252)\n\tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:89)\n\tat org.eclipse.swt.widgets.Display.sendEvent(Display.java:5676)\n\tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1423)\n\tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4935)\n\tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:4429)\n\tat org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$5.run(PartRenderingEngine.java:1160)\n\tat org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:338)\n\tat org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:1049)\n\tat org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:155)\n\tat org.eclipse.e4.ui.internal.workbench.swt.E4Application.start(E4Application.java:166)\n\tat org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:203)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:137)\n\tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:107)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:401)\n\tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:255)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:657)\n\tat org.eclipse.equinox.launcher.Main.basicRun(Main.java:594)\n\tat org.eclipse.equinox.launcher.Main.run(Main.java:1465)\n\tat org.eclipse.equinox.launcher.Main.main(Main.java:1438)\n\n````\n\n**Expected behavior**\n\nSelecting more than one segment should not throw an exception, or, the exception message should point to issues in the model, if there are any (and if this causes the exception).\n\n**Screenshots**\n\n![ioobe](https://user-images.githubusercontent.com/3007126/73950711-ad058500-48fc-11ea-81c1-e67fbf940169.gif)\n\n**Desktop (please complete the following information):**\n - Operating System: Ubuntu 18.04\n - Hexatomic Version: #124 \n - Java Version: OpenJDK 8","files":null},{"type":5,"author":{"id":"7fc094c5f01526c965e541ec82007c487f6fa288"},"timestamp":1581002730,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDMwMTQzMTc4NDk="},"added":["bug"],"removed":[]},{"type":3,"author":{"id":"725ac77188b9c2093ea4100ba878cd5190f5dc34"},"timestamp":1582128804,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDU4ODMwMTUwMQ==","github-url":"https://github.com/hexatomic/hexatomic/issues/132#issuecomment-588301501"},"message":"Duplicate of #145 and will be fixed in #150 . The root cause is, that whenever an edge is a straight line, there is a wrong assumption about the number of points the edge has.","files":null},{"type":4,"author":{"id":"725ac77188b9c2093ea4100ba878cd5190f5dc34"},"timestamp":1582128804,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50MzA1MjMzMjUxMw=="},"status":2},{"type":5,"author":{"id":"725ac77188b9c2093ea4100ba878cd5190f5dc34"},"timestamp":1582128816,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDMwNTIzMzM0MjM="},"added":["duplicate"],"removed":[]}]}